# 네트워크

컴퓨터끼리 데이터를 주고 받기 위해서는 물리적 또는 무선으로 연결되어 있어야 한다. 이렇게 연결된 통신망을 네트워크라고 하며, 이 중 인터넷 프로토콜(IP)를 통해 연결된 거대한 네트워크를 인터넷이라고 한다.

반면, 사내에서만 사용하는 폐쇄적인 네트워크는 인트라넷(Intranet)이라 하며, 외부 인터넷과는 직접 통신하지 않는다.

## 네트워크 계층

클라이언트와 서버가 통신하는 과정을 크게 4계층으로 나눌 수 있다.

- 애플리케이션 계층 - HTTP, FTP
- 전송 계층 - TCP, UDP
- 인터넷 계층 - IP
- 네트워크 인터페이스 계층

클라이언트는 애플리케이션 -> TCP/UDP -> IP -> 네트워크 인터페이스를 거쳐 데이터를 보낸다. 서버는 네트워크 인터페이스 -> IP -> TCP/UDP -> 애플리케이션 순서로 데이터를 받는다.

## IP

IP(Internet Protocol)은 인터넷에서 데이터를 주고 받기 위한 통신 규약이다. 인터넷에 연결된 각 컴퓨터는 고유한 IP 주소를 가지며, IP는 데이터를 해당 주소를 가진 목적지로 전달하도록 한다.

데이터는 패킷(packet)이라는 단위로 나뉘어 전달되며, 각 패킷에는 출발지와 목적지의 IP 주소, 그리고 전송할 데이터(페이로드)가 포함된다.

IP 패킷이 전송되면, 라우터(router)들이 IP에 따라 패킷의 목적지 주소를 확인하고, 최적의 경로를 따라 다음 노드로 전달된다. 이런 과정을 통해 패킷은 여러 네트워크를 거쳐 최종 목적지에 도달한다.

## TCP, UDP

IP는 데이터를 목적지 컴퓨터까지 보내주지만 다음과 같은 한계가 있다.

1. 프로그램 구분: 같은 IP를 사용하는 서버에서 두 개 이상의 애플리케이션이 실행되고 있을 경우, 데이터를 어떤 애플리케이션이 받아야 하는지에 대한 정보가 없다.
2. 비연결성: 패킷을 받을 대상이 없거나, 서비스 불능 상태여도 패킷을 전송한다.
3. 비신뢰성: 중간에 패킷이 사라지거나, 순서가 어긋날 경우 대처할 수 없다.

### Port

포트는 프로세스에 할당된 주소로, 같은 IP 내에서 프로세스를 구분하기 위해 사용된다. TCP와 UDP 모두 포트를 사용하며, 패킷에는 Port 정보가 포함되어 있어 서버의 어떤 프로그램이 이 데이터를 받아야 하는지를 구분할 수 있다.

### TCP

TCP(Transmission Control Protocol)는 연결지향적이며,  
데이터 전달 보증과 순서 보장을 제공하는 신뢰성 높은 프로토콜이다.

#### 3-way-handshake

3-way-handshake는 TCP만의 특징으로, 클라이언트와 서버가 통신하기 전에 서로 데이터를 받을 준비가 되었는지 확인하는 과정이다. 이 과정이 실패하면 데이터를 보내지 않는다.

1. 클라이언트가 서버에 SYN을 보낸다.
2. 서버는 SYN을 받고, ACK와 SYN을 함께 보낸다.
3. 클라이언트는 서버의 SYN을 받고, ACK를 보내며 연결이 성립된다.

- SYN: 접속 요청
- ACK: 요청 수락

#### 데이터 전달 보증과 순서 보장

- 송신 측은 데이터가 잘 전달되었는지 확인하고, 수신 측은 이를 ACK(응답 신호)로 알린다.
- 패킷의 순서가 꼬이면, 꼬인 구간부터 다시 전송하도록 요청한다.

### UDP

UDP(User Datagram Protocol)는 비연결형이며,
데이터 전달 보증이나 순서 보장을 제공하지 않는다.

단순히 Port와 체크섬 정보만 포함하므로 기능이 거의 없고, 그만큼 가볍고 빠르다. 따라서 실시간성이나 최적화가 필요한 서비스(예: 영상 스트리밍, 게임 등)에 자주 사용된다.

## DNS

IP 주소는 사람이 기억하기 어렵고, 서버의 IP 주소가 변경될 수도 있다. 이런 문제를 해결하기 위해 DNS(Domain Name System)을 사용한다.

1. DNS에 서버의 도메인 주소와 IP 주소를 등록해둔다.
2. 클라이언트가 서버의 도메인 주소를 입력하면 DNS 서버가 IP 주소를 반환한다.
3. 반환된 IP 주소로 연결 요청을 보낸다.

## 출처

- [김영한의 실전 자바 고급 2](https://www.inflearn.com/course/%EA%B9%80%EC%98%81%ED%95%9C%EC%9D%98-%EC%8B%A4%EC%A0%84-%EC%9E%90%EB%B0%94-%EA%B3%A0%EA%B8%89-2)
